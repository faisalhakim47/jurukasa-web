/**
 * Material 3 Expressive Linear Progress Indicator
 * @see https://m3.material.io/components/progress-indicators/specs#b8316927-bfef-4b9b-ac8c-07a5e5e7bc60
 *
 * Linear progress indicators display progress by animating along a linear track.
 *
 * HTML STRUCTURE:
 * <div role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" class="linear">
 *   <div class="track">
 *     <div class="indicator"></div>
 *   </div>
 * </div>
 */

/* =================================================================
   # 1. Base Container
   ================================================================= */

[role="progressbar"].linear {
  display: block;
  width: 100%;
  height: 4px;
  border-radius: var(--md-sys-shape-corner-full);
  overflow: hidden;
}

/* =================================================================
   # 2. Track (Background)
   ================================================================= */

[role="progressbar"].linear>.track {
  position: relative;
  width: 100%;
  height: 100%;
  background-color: var(--md-sys-color-surface-container-highest);
  border-radius: inherit;
  overflow: hidden;
}

/* =================================================================
   # 3. Active Indicator
   ================================================================= */

[role="progressbar"].linear>.track>.indicator {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: var(--progress, 0%);
  background-color: var(--md-sys-color-primary);
  border-radius: inherit;
  
  /* Transition for smooth updates */
  transition-property: width;
  transition-duration: var(--md-sys-motion-duration-medium2);
  transition-timing-function: var(--md-sys-motion-easing-standard);
}

/* =================================================================
   # 4. Color Variants
   ================================================================= */

/* Secondary variant */
[role="progressbar"].linear.secondary>.track>.indicator {
  background-color: var(--md-sys-color-secondary);
}

/* Tertiary variant */
[role="progressbar"].linear.tertiary>.track>.indicator {
  background-color: var(--md-sys-color-tertiary);
}

/* Error variant */
[role="progressbar"].linear.error>.track>.indicator {
  background-color: var(--md-sys-color-error);
}

/* =================================================================
   # 5. Indeterminate State (no value set)
   ================================================================= */

[role="progressbar"].linear:not([aria-valuenow])>.track>.indicator,
[role="progressbar"].linear.indeterminate>.track>.indicator {
  width: 30%;
  animation: indeterminate-progress 1.8s var(--md-sys-motion-easing-standard) infinite;
}

@keyframes indeterminate-progress {
  0% {
    left: -30%;
  }
  100% {
    left: 100%;
  }
}

/* =================================================================
   # 6. Size Variants
   ================================================================= */

/* Thicker progress bar */
[role="progressbar"].linear.thick {
  height: 8px;
}

/* Thinner progress bar */
[role="progressbar"].linear.thin {
  height: 2px;
}
